# arc_redirect v1.2.1
# Love redirects, hate 404s
# Andy Carter
# http://andy-carter.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEyOiJhcmNfcmVkaXJlY3QiO3M6NzoidmVyc2lvbiI7czo1
OiIxLjIuMSI7czo2OiJhdXRob3IiO3M6MTE6IkFuZHkgQ2FydGVyIjtzOjEwOiJhdXRob3Jf
dXJpIjtzOjIzOiJodHRwOi8vYW5keS1jYXJ0ZXIuY29tLyI7czoxMToiZGVzY3JpcHRpb24i
O3M6MjU6IkxvdmUgcmVkaXJlY3RzLCBoYXRlIDQwNHMiO3M6NToib3JkZXIiO3M6MToiNSI7
czo0OiJ0eXBlIjtzOjE6IjEiO3M6NToiZmxhZ3MiO3M6MToiMiI7czo0OiJoZWxwIjtzOjQ3
NjM6Igk8aDE+YXJjX3JlZGlyZWN0IChsb3ZlIHJlZGlyZWN0cywgaGF0ZSA0MDRzKTwvaDE+
CgoJPHA+SWYgeW91JiM4MjE3O3JlIGluIHRoZSBwcm9jZXNzIG9mIHJlc3RydWN0dXJpbmcg
YSBUZXh0cGF0dGVybiBzaXRlLCB0aGVuIHRoaXMgaXMgdGhlIHBsdWdpbiBmb3IgeW91ITwv
cD4KCgk8cD5SZXF1aXJlbWVudHM6LTwvcD4KCgk8dWw+CgkJPGxpPlRleHRwYXR0ZXJuIDQu
NSs8L2xpPgoJPC91bD4KCgk8aDI+SW5zdGFsbGF0aW9uPC9oMj4KCgk8cD5UbyBpbnN0YWxs
IGdvIHRvICYjODIxNjtQbHVnaW5zJiM4MjE3OyB1bmRlciAmIzgyMTY7QWRtaW4mIzgyMTc7
IGFuZCBwYXN0ZSB0aGUgcGx1Z2luIGNvZGUgaW50byB0aGUgJiM4MjE2O0luc3RhbGwgcGx1
Z2luJiM4MjE3OyBib3gsICYjODIxNjt1cGxvYWQmIzgyMTc7IGFuZCB0aGVuICYjODIxNjtp
bnN0YWxsJiM4MjE3Oy4gWW91IHdpbGwgdGhlbiBuZWVkIHRvIGFjdGl2YXRlIHRoZSBwbHVn
aW4uPC9wPgoKCTxoMj5Vbmluc3RhbGw8L2gyPgoKCTxwPlRvIHVuaW5zdGFsbCA8c3BhbiBj
bGFzcz0idGFnIj5hcmNfcmVkaXJlY3Q8L3NwYW4+IHNpbXBseSBkZWxldGUgdGhlIHBsdWdp
biBmcm9tIHRoZSAmIzgyMTY7UGx1Z2lucyYjODIxNzsgdGFiLiAgVGhpcyB3aWxsIHJlbW92
ZSB0aGUgcGx1Z2luIGNvZGUgYW5kIGRyb3AgdGhlIDxzcGFuIGNsYXNzPSJ0YWciPmFyY19y
ZWRpcmVjdDwvc3Bhbj4gdGFibGUgZnJvbSB5b3VyIFRleHRwYXR0ZXJuIGRhdGFiYXNlLjwv
cD4KCgk8aDI+VXNhZ2U8L2gyPgoKCTxwPmFyY19yZWRpcmVjdCBhZGRzIGEgbmV3IHRhYiB1
bmRlciAmIzgyMTY7RXh0ZW5zaW9ucyYjODIxNzsgZnJvbSB3aGVyZSB5b3UgY2FuIGRlZmlu
ZSBwYWlycyBvZiA8c3BhbiBjbGFzcz0iY2FwcyI+VVJMPC9zcGFuPnMgZm9yIGhhbmRsaW5n
IHJlZGlyZWN0cy4gQmFzaWNhbGx5IHByb3ZpZGUgYW4gb3JpZ2luYWwgPHNwYW4gY2xhc3M9
ImNhcHMiPlVSTDwvc3Bhbj4gb24geW91ciBUZXh0cGF0dGVybiBzaXRlIHRoYXQgaXMgZ2Vu
ZXJhdGluZyBhIDQwNCwgJiM4MjIwO3BhZ2Ugbm90IGZvdW5kJiM4MjIxOywgZXJyb3IgYW5k
IGEgcmVkaXJlY3QgPHNwYW4gY2xhc3M9ImNhcHMiPlVSTDwvc3Bhbj4uIFRoZW4gd2hlbmV2
ZXIgc29tZW9uZSBnb2VzIHRvIHRoZSBvcmlnaW5hbCA8c3BhbiBjbGFzcz0iY2FwcyI+VVJM
PC9zcGFuPiByYXRoZXIgdGhhbiBnZXQgdGhlIHN0YW5kYXJkIDQwNCBlcnJvciBwYWdlIHRo
ZXkgd2lsbCBiZSByZWRpcmN0ZWQgdG8gdGhlIG5ldyA8c3BhbiBjbGFzcz0iY2FwcyI+VVJM
PC9zcGFuPiAod2l0aCBhIDMwMSBwZXJtZW5hbnRlbHkgbW92ZWQsIG9yIDMwMiB0ZW1wb3Jh
cmlseSByZW1vdmVkKS48L3A+CgoJPHA+VGhlIHJlZGlyZWN0IGZyb20gPHNwYW4gY2xhc3M9
ImNhcHMiPlVSTDwvc3Bhbj4gbXVzdCBwcm9kdWNlIGEgNDA0IHBhZ2UgaW4gVGV4dHBhdHRl
cm4gb24gdGhlIHNpdGUgdGhpcyBwbHVnaW4gaXMgaW5zdGFsbGVkLjwvcD4KCgk8dWw+CgkJ
PGxpPmFyY19yZWRpcmVjdCB0cmVhdHMgPGVtPmh0dHA6Ly93d3cuZXhhbXBsZS5jb20vbWlz
c2luZzwvZW0+IHRoZSBzYW1lIGFzIDxlbT5odHRwOi8vd3d3LmV4YW1wbGUuY29tL21pc3Np
bmcvPC9lbT48L2xpPgoJCTxsaT5hcmNfcmVkaXJlY3QgZG9lcyBub3QgdHJlYXQgPGVtPmh0
dHA6Ly9leGFtcGxlLmNvbS9taXNzaW5nPC9lbT4gYW5kIDxlbT5odHRwOi8vd3d3LmV4YW1w
bGUuY29tL21pc3Npbmc8L2VtPiBhcyB0aGUgc2FtZSA8c3BhbiBjbGFzcz0iY2FwcyI+VVJM
PC9zcGFuPjwvbGk+CgkJPGxpPllvdSBjYW4gdXNlIGFic29sdXRlIDxzcGFuIGNsYXNzPSJj
YXBzIj5VUkw8L3NwYW4+cyBsaWtlIDxlbT4vbWlzc2luZzwvZW0+PC9saT4KCTwvdWw+CgoJ
PGgyPkF1dGhvcjwvaDI+CgoJPHA+PGEgaHJlZj0iaHR0cDovL2FuZHktY2FydGVyLmNvbSI+
QW5keSBDYXJ0ZXI8L2E+LiBGb3Igb3RoZXIgVGV4dHBhdHRlcm4gcGx1Z2lucyBieSBtZSB2
aXNpdCBteSA8YSBocmVmPSJodHRwOi8vYW5keS1jYXJ0ZXIuY29tL3R4cCI+UGx1Z2lucyBw
YWdlPC9hPi48L3A+CgoJPHA+VGhhbmtzIHRvIDxhIGhyZWY9Imh0dHA6Ly9vbGl2ZXJrZXIu
Y28udWsvIj5PbGl2ZXIgS2VyPC9hPiBmb3IgZ2l2aW5nIG1lIHRoZSBpZGVhIGZvciB0aGlz
IHBsdWdpbi48L3A+CgoJPGgyPkxpY2Vuc2U8L2gyPgoKCTxwPlRoZSA8c3BhbiBjbGFzcz0i
Y2FwcyI+TUlUPC9zcGFuPiBMaWNlbnNlICg8c3BhbiBjbGFzcz0iY2FwcyI+TUlUPC9zcGFu
Pik8L3A+CgoJPHA+Q29weXJpZ2h0ICYjMTY5OyAyMDE1IEFuZHkgQ2FydGVyPC9wPgoKCTxw
PlBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkg
cGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRl
ZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJiM4MjIwO1NvZnR3YXJlJiM4MjIxOyksIHRv
IGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3
aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVy
Z2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGll
cyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBT
b2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2lu
ZyBjb25kaXRpb25zOjwvcD4KCgk8cD5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQg
dGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGwgY29waWVz
IG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS48L3A+CgoJPHA+PHNw
YW4gY2xhc3M9ImNhcHMiPlRIRTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPlNPRlRXQVJF
PC9zcGFuPiBJUyA8c3BhbiBjbGFzcz0iY2FwcyI+UFJPVklERUQ8L3NwYW4+ICYjODIyMDtB
UyBJUyYjODIyMTssIDxzcGFuIGNsYXNzPSJjYXBzIj5XSVRIT1VUPC9zcGFuPiA8c3BhbiBj
bGFzcz0iY2FwcyI+V0FSUkFOVFk8L3NwYW4+IE9GIDxzcGFuIGNsYXNzPSJjYXBzIj5BTlk8
L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5LSU5EPC9zcGFuPiwgPHNwYW4gY2xhc3M9ImNh
cHMiPkVYUFJFU1M8L3NwYW4+IE9SIDxzcGFuIGNsYXNzPSJjYXBzIj5JTVBMSUVEPC9zcGFu
PiwgPHNwYW4gY2xhc3M9ImNhcHMiPklOQ0xVRElORzwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNh
cHMiPkJVVDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPk5PVDwvc3Bhbj4gPHNwYW4gY2xh
c3M9ImNhcHMiPkxJTUlURUQ8L3NwYW4+IFRPIDxzcGFuIGNsYXNzPSJjYXBzIj5USEU8L3Nw
YW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5XQVJSQU5USUVTPC9zcGFuPiBPRiA8c3BhbiBjbGFz
cz0iY2FwcyI+TUVSQ0hBTlRBQklMSVRZPC9zcGFuPiwgPHNwYW4gY2xhc3M9ImNhcHMiPkZJ
VE5FU1M8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5GT1I8L3NwYW4+IEEgPHNwYW4gY2xh
c3M9ImNhcHMiPlBBUlRJQ1VMQVI8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5QVVJQT1NF
PC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+QU5EPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2Fw
cyI+Tk9OSU5GUklOR0VNRU5UPC9zcGFuPi4gSU4gTk8gPHNwYW4gY2xhc3M9ImNhcHMiPkVW
RU5UPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+U0hBTEw8L3NwYW4+IDxzcGFuIGNsYXNz
PSJjYXBzIj5USEU8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5BVVRIT1JTPC9zcGFuPiBP
UiA8c3BhbiBjbGFzcz0iY2FwcyI+Q09QWVJJR0hUPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2Fw
cyI+SE9MREVSUzwvc3Bhbj4gQkUgPHNwYW4gY2xhc3M9ImNhcHMiPkxJQUJMRTwvc3Bhbj4g
PHNwYW4gY2xhc3M9ImNhcHMiPkZPUjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPkFOWTwv
c3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPkNMQUlNPC9zcGFuPiwgPHNwYW4gY2xhc3M9ImNh
cHMiPkRBTUFHRVM8L3NwYW4+IE9SIDxzcGFuIGNsYXNzPSJjYXBzIj5PVEhFUjwvc3Bhbj4g
PHNwYW4gY2xhc3M9ImNhcHMiPkxJQUJJTElUWTwvc3Bhbj4sIDxzcGFuIGNsYXNzPSJjYXBz
Ij5XSEVUSEVSPC9zcGFuPiBJTiBBTiA8c3BhbiBjbGFzcz0iY2FwcyI+QUNUSU9OPC9zcGFu
PiBPRiA8c3BhbiBjbGFzcz0iY2FwcyI+Q09OVFJBQ1Q8L3NwYW4+LCA8c3BhbiBjbGFzcz0i
Y2FwcyI+VE9SVDwvc3Bhbj4gT1IgPHNwYW4gY2xhc3M9ImNhcHMiPk9USEVSV0lTRTwvc3Bh
bj4sIDxzcGFuIGNsYXNzPSJjYXBzIj5BUklTSU5HPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2Fw
cyI+RlJPTTwvc3Bhbj4sIDxzcGFuIGNsYXNzPSJjYXBzIj5PVVQ8L3NwYW4+IE9GIE9SIElO
IDxzcGFuIGNsYXNzPSJjYXBzIj5DT05ORUNUSU9OPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2Fw
cyI+V0lUSDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPlRIRTwvc3Bhbj4gPHNwYW4gY2xh
c3M9ImNhcHMiPlNPRlRXQVJFPC9zcGFuPiBPUiA8c3BhbiBjbGFzcz0iY2FwcyI+VEhFPC9z
cGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+VVNFPC9zcGFuPiBPUiA8c3BhbiBjbGFzcz0iY2Fw
cyI+T1RIRVI8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5ERUFMSU5HUzwvc3Bhbj4gSU4g
PHNwYW4gY2xhc3M9ImNhcHMiPlRIRTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPlNPRlRX
QVJFPC9zcGFuPi48L3A+IjtzOjQ6ImNvZGUiO3M6ODk3NzoicmVnaXN0ZXJfY2FsbGJhY2so
J2FyY19yZWRpcmVjdF9pbnN0YWxsJywncGx1Z2luX2xpZmVjeWNsZS5hcmNfcmVkaXJlY3Qn
LCAnaW5zdGFsbGVkJyk7CnJlZ2lzdGVyX2NhbGxiYWNrKCdhcmNfcmVkaXJlY3RfdW5pbnN0
YWxsJywncGx1Z2luX2xpZmVjeWNsZS5hcmNfcmVkaXJlY3QnLCAnZGVsZXRlZCcpOwpyZWdp
c3Rlcl9jYWxsYmFjaygnYXJjX3JlZGlyZWN0JywgJ3R4cF9kaWUnLCA0MDQpOwphZGRfcHJp
dnMoJ2FyY19yZWRpcmVjdCcsICcxLDIsMyw0Jyk7CnJlZ2lzdGVyX3RhYignZXh0ZW5zaW9u
cycsICdhcmNfcmVkaXJlY3QnLCAnYXJjX3JlZGlyZWN0Jyk7CnJlZ2lzdGVyX2NhbGxiYWNr
KCdhcmNfcmVkaXJlY3RfdGFiJywgJ2FyY19yZWRpcmVjdCcpOwoKLyoKICogQ2hlY2sgZm9y
IHJlZGlyZWN0ZWQgVVJMcyBhbmQgZm9yd2FyZCB3aXRoIGEgMzAxIHdoZXJlIG5lY2Vzc2Fy
eS4KICovCmZ1bmN0aW9uIGFyY19yZWRpcmVjdCgkZXZlbnQsICRzdGVwKQp7CgkkdXJsID0g
JF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ107CgkvLyBTdHJpcCBmaW5hbCBzbGFzaCBmcm9tIHVy
bAoJJHVybCA9IHJ0cmltKCR1cmwsICcvJyk7CgkvLyBCdWlsZCB0aGUgZnVsbCBVUkwgaW5j
bHVkaW5nIHRoZSBwcm90b2NvbCBhbmQgZG9tYWluCgkkZnVsbFVybCA9IFBST1RPQ09MIC4g
JF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10gLiAkdXJsOwoKCSR1cmwgPSBkb1NsYXNoKCR1cmwp
OwoJJGZ1bGxVcmwgPSBkb1NsYXNoKCRmdWxsVXJsKTsKCgkkcmVkaXJlY3QgPSBzYWZlX3Jv
dygKCQkncmVkaXJlY3RVcmwnLAoJCSdhcmNfcmVkaXJlY3QnLAoJCSJvcmlnaW5hbFVybCA9
ICckdXJsJyBPUiBvcmlnaW5hbFVybCA9ICckZnVsbFVybCcgT1JERVIgQlkgQ0hBUl9MRU5H
VEgob3JpZ2luYWxVcmwpIERFU0MsIGFyY19yZWRpcmVjdElEIERFU0MiCgkpOwoKCWlmIChp
c3NldCgkcmVkaXJlY3RbJ3JlZGlyZWN0VXJsJ10pKQoJewoJCW9iX2VuZF9jbGVhbigpOwoK
CQkkc3RhdHVzID0gJ0hUVFAvMS4wICc7CgkJJHN0YXR1cyAuPSAkcmVkaXJlY3RbJ3N0YXR1
c0NvZGUnXT09MzAxID8gJzMwMSBNb3ZlZCBQZXJtYW5lbnRseScgOiAnMzAyIE1vdmVkIFRl
bXBvcmFyaWx5JzsKCgkJaGVhZGVyKCJTdGF0dXM6IHskcmVkaXJlY3RbJ3N0YXR1c0NvZGUn
XX0iKTsKCQloZWFkZXIoJHN0YXR1cyk7CgkJaGVhZGVyKCdMb2NhdGlvbjogJyAuICRyZWRp
cmVjdFsncmVkaXJlY3RVcmwnXSwgVFJVRSwgJHJlZGlyZWN0WydzdGF0dXNDb2RlJ10pOwoK
CQkvLyBJbiBjYXNlIHRoZSBoZWFkZXIoKSBtZXRob2QgZmFpbHMsIGZhbGwgYmFjayBvbiBh
IGNsYXNzaWMgcmVkaXJlY3QKCQllY2hvICc8aHRtbD48aGVhZD48bWV0YSBodHRwLWVxdWl2
PSJSZWZyZXNoIiBjb250ZW50PSIwO1VSTD0nCgkJCS4gJHJlZGlyZWN0WydyZWRpcmVjdFVy
bCddIC4gJyI+PC9oZWFkPjxib2R5PjwvYm9keT48L2h0bWw+JzsKCQlkaWUoKTsKCX0KCgly
ZXR1cm47Cgp9CgpmdW5jdGlvbiBhcmNfcmVkaXJlY3RfdGFiKCRldmVudCwgJHN0ZXApIHsK
CXN3aXRjaCAoJHN0ZXApIHsKCQljYXNlICdhZGQnOiBhcmNfcmVkaXJlY3RfYWRkKCk7IGJy
ZWFrOwoJCWNhc2UgJ3NhdmUnOiBhcmNfcmVkaXJlY3Rfc2F2ZSgpOyBicmVhazsKCQljYXNl
ICdlZGl0JzogYXJjX3JlZGlyZWN0X2VkaXQoKTsgYnJlYWs7CgkJY2FzZSAnYXJjX3JlZGly
ZWN0X211bHRpZWRpdCc6IGFyY19yZWRpcmVjdF9tdWx0aWVkaXQoKTsgYnJlYWs7CgkJZGVm
YXVsdDogYXJjX3JlZGlyZWN0X2xpc3QoKTsKCX0KfQoKZnVuY3Rpb24gYXJjX3JlZGlyZWN0
X2xpc3QoJG1lc3NhZ2UgPSAnJykKewoJZ2xvYmFsICRldmVudDsKCglleHRyYWN0KGdwc2Eo
YXJyYXkoJ3BhZ2UnKSkpOwoKCXBhZ2V0b3AoJ2FyY19yZWRpcmVjdCcsJG1lc3NhZ2UpOwoK
CSRjcml0ZXJpYSA9IDE7CgoJJHRvdGFsID0gZ2V0Q291bnQoJ2FyY19yZWRpcmVjdCcsICRj
cml0ZXJpYSk7CgoJJGxpbWl0ID0gMjU7CglsaXN0KCRwYWdlLCAkb2Zmc2V0LCAkbnVtUGFn
ZXMpID0gcGFnZXIoJHRvdGFsLCAkbGltaXQsICRwYWdlKTsKCgkkc29ydF9zcWwgPSAnYXJj
X3JlZGlyZWN0SUQgZGVzYyc7CgoJJHJzID0gc2FmZV9yb3dzX3N0YXJ0KCcqJywgJ2FyY19y
ZWRpcmVjdCcsICIkY3JpdGVyaWEgb3JkZXIgYnkgJHNvcnRfc3FsIGxpbWl0ICRvZmZzZXQs
ICRsaW1pdCIpOwoKCSRzdGF0dXNDb2RlcyA9IGFycmF5KAoJCTMwMSA9PiAnUGVybWFuZW50
JywKCQkzMDIgPT4gJ1RlbXBvcmFyeScKCSk7CgoJJGh0bWwgPSAnPGgxIGNsYXNzPSJ0eHAt
aGVhZGluZyI+YXJjX3JlZGlyZWN0PC9oMT4nOwoJLy8gSW5jbHVkZSBhIHF1aWNrIGFkZCBm
b3JtCgkkZm9ybSA9ICc8cD48c3BhbiBjbGFzcz0iZWRpdC1sYWJlbCI+PGxhYmVsIGZvcj0i
b3JpZ2luYWxVcmwiPlJlZGlyZWN0IGZyb20gVVJMIChwcm9kdWNlcyA0MDQgcGFnZSk8L2xh
YmVsPjwvc3Bhbj4nOwoJJGZvcm0gLj0gJzxzcGFuIGNsYXNzPSJlZGl0LXZhbHVlIj4nIC4g
ZklucHV0KCd0ZXh0JywgJ29yaWdpbmFsVXJsJywgJycsICcnLCAnJywgJycsICcnLCAnJywg
J29yaWdpbmFsVXJsJykgLiAnPC9zcGFuPjwvcD4nOwoJJGZvcm0gLj0gJzxwPjxzcGFuIGNs
YXNzPSJlZGl0LWxhYmVsIj48bGFiZWwgZm9yPSJyZWRpcmVjdFVybCI+UmVkaXJlY3QgdG8g
VVJMPC9sYWJlbD48L3NwYW4+JzsKCSRmb3JtIC49ICc8c3BhbiBjbGFzcz0iZWRpdC12YWx1
ZSI+JyAuIGZJbnB1dCgndGV4dCcsICdyZWRpcmVjdFVybCcsICcnLCAnJywgJycsICcnLCAn
JywgJycsICdyZWRpcmVjdFVybCcpIC4gJzwvc3Bhbj48L3A+JzsKCSRmb3JtIC49ICc8cD48
c3BhbiBjbGFzcz0iZWRpdC1sYWJlbCI+PGxhYmVsIGZvcj0ic3RhdHVzQ29kZSI+UmVkaXJl
Y3QgVHlwZTwvbGFiZWw+PC9zcGFuPic7CgkkZm9ybSAuPSAnPHNwYW4gY2xhc3M9ImVkaXQt
dmFsdWUiPjxzZWxlY3QgbmFtZT0ic3RhdHVzQ29kZSI+JyAuIHR5cGVfb3B0aW9ucygkc3Rh
dHVzQ29kZXMpIC4gJzwvc2VsZWN0PiZuYnNwOycgLiBmSW5wdXQoJ3N1Ym1pdCcsICdhZGQn
LCBnVHh0KCdBZGQnKSkgLiAnPC9zcGFuPjwvcD4nOwoKCSRmb3JtIC49IGVJbnB1dCgnYXJj
X3JlZGlyZWN0Jykuc0lucHV0KCdhZGQnKTsKCSRodG1sIC49IGZvcm0oJzxkaXYgY2xhc3M9
InBsdWdpbi1jb2x1bW4iPicgLiAkZm9ybSAuICc8L2Rpdj4nLCAnJywgJycsICdwb3N0Jywg
J2VkaXQtZm9ybScpOwoKCS8vIEFkZCBhIGxpc3Qgb2YgZXhpc3RpbmcgcmVkaXJlY3RzCgkk
aHRtbCAuPSBuIC4gbiAuICc8Zm9ybSBhY3Rpb249ImluZGV4LnBocCIgaWQ9ImFyY19yZWRp
cmVjdF9mb3JtIiBjbGFzcz0ibXVsdGlfZWRpdF9mb3JtIiBtZXRob2Q9InBvc3QiIG5hbWU9
Imxvbmdmb3JtIj4nOwoJJGh0bWwgLj0gc3RhcnRUYWJsZShudWxsLCBudWxsLCAndHhwLWxp
c3QnKTsKCgkkaHRtbCAuPSAnPHRoZWFkPicgLiB0cigKCQloQ2VsbCgKCQkJZklucHV0KCdj
aGVja2JveCcsICdzZWxlY3RfYWxsJywgMCwgJycsICcnLCAnJywgJycsICcnLCAnc2VsZWN0
X2FsbCcpLAoJCQknJywKCQkJJyB0aXRsZT0iVG9nZ2xlIGFsbC9ub25lIHNlbGVjdGVkIiBj
bGFzcz0ibXVsdGktZWRpdCInCgkJKQoJCS4gaENlbGwoJ0lEIycpCgkJLiBoQ2VsbCgnT3Jp
Z2luYWwgVVJMJykKCQkuIGhDZWxsKCdSZWRpcmVjdCBVUkwnKQoJCS4gaENlbGwoJ1R5cGUn
KQoJCS4gaENlbGwoJ01hbmFnZScpCgkpIC4gJzwvdGhlYWQ+JzsKCgl3aGlsZSAoJHJlZGly
ZWN0ID0gbmV4dFJvdygkcnMpKQoJewoJCSRlZGl0TGluayA9IGhyZWYoCgkJCWdUeHQoJ2Vk
aXQnKSwKCQkJJz9ldmVudD1hcmNfcmVkaXJlY3QmYW1wO3N0ZXA9ZWRpdCZhbXA7aWQ9JyAu
ICRyZWRpcmVjdFsnYXJjX3JlZGlyZWN0SUQnXQoJCSk7CgkJJHJlZGlyZWN0TGluayA9IGhy
ZWYoJ1Rlc3QnLCAkcmVkaXJlY3RbJ29yaWdpbmFsVXJsJ10pOwoJCSRodG1sIC49IHRyKAoJ
CQl0ZChmSW5wdXQoJ2NoZWNrYm94JywgJ3NlbGVjdGVkW10nLCAkcmVkaXJlY3RbJ2FyY19y
ZWRpcmVjdElEJ10pLCAnJywgJ211bHRpLWVkaXQnKQoJCQkuIHRkKCRyZWRpcmVjdFsnYXJj
X3JlZGlyZWN0SUQnXSwgMjAsICdpZCcpCgkJCS4gdGQoaHRtbHNwZWNpYWxjaGFycygkcmVk
aXJlY3RbJ29yaWdpbmFsVXJsJ10pLCAxNzUpCgkJCS4gdGQoaHRtbHNwZWNpYWxjaGFycygk
cmVkaXJlY3RbJ3JlZGlyZWN0VXJsJ10pLCAxNzUpCgkJCS4gdGQoJHJlZGlyZWN0WydzdGF0
dXNDb2RlJ109PTMwMSA/ICdQZXJtYW5lbnQnIDogJ1RlbXBvcmFyeScsIDE3NSkKCQkJLiB0
ZCgiJGVkaXRMaW5rIDxzcGFuPiB8IDwvc3Bhbj4gJHJlZGlyZWN0TGluayIsIDM1LCAnbWFu
YWdlJykKCQkpOwoJfQoKCSRodG1sIC49IGVuZFRhYmxlKCk7CgoJJG1ldGhvZHMgPSBhcnJh
eSgKCQknZGVsZXRlJyA9PiBnVHh0KCdkZWxldGUnKQoJKTsKCgkkaHRtbCAuPSBtdWx0aV9l
ZGl0KCRtZXRob2RzLCAnYXJjX3JlZGlyZWN0JywgJ2FyY19yZWRpcmVjdF9tdWx0aWVkaXQn
KTsKCgkkaHRtbCAuPSAnPC9mb3JtPic7CgoJJGh0bWwgLj0gbiAuICc8ZGl2IGlkPSInLiRl
dmVudC4nX25hdmlnYXRpb24iIGNsYXNzPSJ0eHAtbmF2aWdhdGlvbiI+JwoJCS4gbiAuIG5h
dl9mb3JtKCdhcmNfcmVkaXJlY3QnLCAkcGFnZSwgJG51bVBhZ2VzLCAnJywgJycsICcnLCAn
JywgJHRvdGFsLCAkbGltaXQpCgkJLiBuIC4gJzwvZGl2Pic7CgoJZWNobyAkaHRtbDsKCgly
ZXR1cm47Cgp9CgpmdW5jdGlvbiBhcmNfcmVkaXJlY3RfZWRpdCgkbWVzc2FnZT0nJykKewoJ
cGFnZXRvcCgnYXJjX3JlZGlyZWN0JywkbWVzc2FnZSk7CgoJJG9yaWdpbmFsVXJsID0gZ3Bz
KCdvcmlnaW5hbFVybCcpOwoJJHJlZGlyZWN0VXJsID0gZ3BzKCdyZWRpcmVjdFVybCcpOwoJ
JHN0YXR1c0NvZGUgPSBncHMoJ3N0YXR1c0NvZGUnKTsKCglpZiAoJGlkPWdwcygnaWQnKSkg
ewoJCSRpZCA9IGRvU2xhc2goJGlkKTsKCQkkcnMgPSBzYWZlX3Jvdygnb3JpZ2luYWxVcmws
cmVkaXJlY3RVcmwsc3RhdHVzQ29kZScsICdhcmNfcmVkaXJlY3QnLCAiYXJjX3JlZGlyZWN0
SUQgPSAkaWQiKTsKCQlleHRyYWN0KCRycyk7Cgl9CgoJJHN0YXR1c0NvZGVzID0gYXJyYXko
CgkJMzAxID0+ICdQZXJtYW5lbnQnLAoJCTMwMiA9PiAnVGVtcG9yYXJ5JwoJKTsKCgkkaHRt
bCA9ICc8aDEgY2xhc3M9InR4cC1oZWFkaW5nIj5hcmNfcmVkaXJlY3Q8L2gxPic7CgkkZm9y
bSA9ICc8aDI+JyAuICgkaWQgPyAnRWRpdCcgOiAnQWRkJykgLiAnIFJlZGlyZWN0PC9oMj4n
OwoJJGZpZWxkcyA9IGFycmF5KAoJCSdvcmlnaW5hbFVybCcgPT4gJ1JlZGlyZWN0IGZyb20g
VVJMJywKCQkncmVkaXJlY3RVcmwnID0+ICdSZWRpcmVjdCB0byBVUkwnCgkpOwoJZm9yZWFj
aCAoJGZpZWxkcyBhcyAka2V5ID0+ICRsYWJlbCkKCXsKCQkkZm9ybSAuPSAnPHAgY2xhc3M9
IicgLiAka2V5IC4gJyI+PHNwYW4gY2xhc3M9ImVkaXQtbGFiZWwiPjxsYWJlbCBmb3I9IiRr
ZXkiPicgLiAkbGFiZWwgLiAnPC9sYWJlbD48L3NwYW4+JzsKCQkkZm9ybSAuPSAnPHNwYW4g
Y2xhc3M9ImVkaXQtdmFsdWUiPicgLiBmSW5wdXQoJ3RleHQnLCAka2V5LCAkJGtleSwgJycs
ICcnLCAnJywgJycsICcnLCAka2V5KSAuICc8L3NwYW4+JzsKCQkkZm9ybSAuPSAnPC9wPic7
Cgl9CgkkZm9ybSAuPSAnPHAgY2xhc3M9InN0YXR1c0NvZGUiPjxzcGFuIGNsYXNzPSJlZGl0
LWxhYmVsIj48bGFiZWwgZm9yPSJzdGF0dXNDb2RlIj5SZWRpcmVjdCBUeXBlPC9sYWJlbD48
L3NwYW4+JzsKCSRmb3JtIC49IHNlbGVjdElucHV0KCdzdGF0dXNDb2RlJywgJHN0YXR1c0Nv
ZGVzLCAkc3RhdHVzQ29kZSk7CgkkZm9ybSAuPSAnPC9wPic7CgkkZm9ybSAuPSBlSW5wdXQo
J2FyY19yZWRpcmVjdCcpOwoJJGZvcm0gLj0gJzxwPic7CglpZiAoJGlkKSB7CgkJJGZvcm0g
Lj0gc0lucHV0KCdzYXZlJykuaElucHV0KCdpZCcsJGlkKS5mSW5wdXQoJ3N1Ym1pdCcsJ3Nh
dmUnLGdUeHQoJ1NhdmUnKSwncHVibGlzaCcpOwoJfSBlbHNlIHsKCQkkZm9ybSAuPSBzSW5w
dXQoJ2FkZCcpLmZJbnB1dCgnc3VibWl0JywnYWRkJyxnVHh0KCdBZGQnKSwncHVibGlzaCcp
OwoJfQoJJGZvcm0gLj0gJzwvcD4nOwoJJGh0bWwgLj0gZm9ybSgnPGRpdiBjbGFzcz0icGx1
Z2luLWNvbHVtbiI+PGRpdiBjbGFzcz0idHhwLWVkaXQiPicgLiAkZm9ybSAuICc8L2Rpdj48
L2Rpdj4nLCAnJywgJycsICdwb3N0JywgJ2VkaXQtZm9ybScpOwoKCWVjaG8gJGh0bWw7Cgp9
CgpmdW5jdGlvbiBhcmNfcmVkaXJlY3RfYWRkKCkKewoJJG9yaWdpbmFsVXJsID0gcHMoJ29y
aWdpbmFsVXJsJyk7CgkkcmVkaXJlY3RVcmwgPSBwcygncmVkaXJlY3RVcmwnKTsKCglpZiAo
JG9yaWdpbmFsVXJsID09PSAnJyB8fCAkcmVkaXJlY3RVcmwgPT09ICcnKQoJewoJCWFyY19y
ZWRpcmVjdF9lZGl0KCdVbmFibGUgdG8gYWRkIG5ldyByZWRpcmVjdCcpOwoJCXJldHVybjsK
CX0KCgkkc3RhdHVzQ29kZSA9IHBzKCdzdGF0dXNDb2RlJykgPT0gMzAxID8gMzAxIDogMzAy
OwoKCS8vIFN0cmlwIGZpbmFsIHNsYXNoIGZyb20gb3JpZ2luYWwgdXJsCgkkb3JpZ2luYWxV
cmwgPSBydHJpbSgkb3JpZ2luYWxVcmwsICcvJyk7CgoJJHEgPSBzYWZlX2luc2VydCgKCQki
YXJjX3JlZGlyZWN0IiwKCQkib3JpZ2luYWxVcmwgPSAnIiAuIHRyaW0oZG9TbGFzaCgkb3Jp
Z2luYWxVcmwpKSAuICInLCByZWRpcmVjdFVybCA9ICciIC4gdHJpbShkb1NsYXNoKCRyZWRp
cmVjdFVybCkpIC4gIicsIHN0YXR1c0NvZGUgPSAiIC4gJHN0YXR1c0NvZGUKCSk7CgoJaWYg
KCRxKQoJewoJCSRtZXNzYWdlID0gZ1R4dCgnUmVkaXJlY3QgYWRkZWQnKTsKCQlhcmNfcmVk
aXJlY3RfbGlzdCgkbWVzc2FnZSk7Cgl9CgoJcmV0dXJuOwp9CgpmdW5jdGlvbiBhcmNfcmVk
aXJlY3Rfc2F2ZSgpCnsKCWlmICghJGlkPXBzKCdpZCcpKQoJewoJCWFyY19yZWRpcmVjdF9s
aXN0KCdVbmFibGUgdG8gc2F2ZSByZWRpcmVjdCcpOwoJCXJldHVybjsKCX0KCgkkb3JpZ2lu
YWxVcmwgPSBwcygnb3JpZ2luYWxVcmwnKTsKCSRyZWRpcmVjdFVybCA9IHBzKCdyZWRpcmVj
dFVybCcpOwoJJHN0YXR1c0NvZGUgPSBwcygnc3RhdHVzQ29kZScpOwoKCWlmICgkb3JpZ2lu
YWxVcmwgPT0gJycgfHwgJHJlZGlyZWN0VXJsID09ICcnIHx8IGVtcHR5KCRzdGF0dXNDb2Rl
KSkKCXsKCQlhcmNfcmVkaXJlY3RfZWRpdCgnVW5hYmxlIHRvIHNhdmUgcmVkaXJlY3QnKTsK
CQlyZXR1cm47Cgl9CgoJLy8gU3RyaXAgZmluYWwgc2xhc2ggZnJvbSBvcmlnaW5hbCB1cmwK
CSRvcmlnaW5hbFVybCA9IHJ0cmltKCRvcmlnaW5hbFVybCwgJy8nKTsKCgkkaWQgPSBkb1Ns
YXNoKCRpZCk7CgoJJHJzID0gc2FmZV91cGRhdGUoCgkJImFyY19yZWRpcmVjdCIsCgkJIm9y
aWdpbmFsVXJsICAgID0gJyIgLiB0cmltKGRvU2xhc2goJG9yaWdpbmFsVXJsKSkgLiAiJywg
IHJlZGlyZWN0VXJsID0gJyIgLiB0cmltKGRvU2xhc2goJHJlZGlyZWN0VXJsKSkgLiAiJywg
IHN0YXR1c0NvZGUgPSAiIC4gdHJpbShkb1NsYXNoKCRzdGF0dXNDb2RlKSkgLiAiIiwKCQki
YXJjX3JlZGlyZWN0SUQgPSAkaWQiCgkpOwoKCWlmICgkcnMpCgl7CgkJJG1lc3NhZ2UgPSBn
VHh0KCdSZWRpcmVjdCB1cGRhdGVkJyk7CgkJYXJjX3JlZGlyZWN0X2xpc3QoJG1lc3NhZ2Up
OwoJfQoJcmV0dXJuOwp9CgpmdW5jdGlvbiBhcmNfcmVkaXJlY3RfbXVsdGllZGl0KCkgewoJ
JHNlbGVjdGVkID0gcHMoJ3NlbGVjdGVkJyk7CgoJaWYgKCEkc2VsZWN0ZWQgfHwgIWlzX2Fy
cmF5KCRzZWxlY3RlZCkpIHsKCQlhcmNfcmVkaXJlY3RfbGlzdCgpOwoJCXJldHVybjsKCX0K
CgkkbWV0aG9kID0gcHMoJ2VkaXRfbWV0aG9kJyk7CgkkY2hhbmdlZCA9IGFycmF5KCk7CgoJ
JG1lc3NhZ2UgPSAnJzsKCglzd2l0Y2ggKCRtZXRob2QpIHsKCQljYXNlICdkZWxldGUnOgoK
CQkJZm9yZWFjaCAoJHNlbGVjdGVkIGFzICRpZCkgewoJCQkJJGlkID0gZG9TbGFzaCgkaWQp
OwoJCQkJaWYgKHNhZmVfZGVsZXRlKCdhcmNfcmVkaXJlY3QnLCAnYXJjX3JlZGlyZWN0SUQg
PSAnLiRpZCkpIHsKCQkJCQkkY2hhbmdlZFtdID0gJGlkOwoJCQkJfQoJCQl9CgkJCSRtZXNz
YWdlID0gY291bnQoJGNoYW5nZWQpLicgcmVkaXJlY3RzIGRlbGV0ZWQnOwoJCQlicmVhazsK
CX0KCglhcmNfcmVkaXJlY3RfbGlzdCgkbWVzc2FnZSk7Cn0KCi8vIEluc3RhbGxhdGlvbiBm
dW5jdGlvbiAtIGJ1aWxkcyBNeVNRTCB0YWJsZQpmdW5jdGlvbiBhcmNfcmVkaXJlY3RfaW5z
dGFsbCgpCnsKCgkvLyBGb3IgZmlyc3QgaW5zdGFsbCwgY3JlYXRlIHRhYmxlIGZvciByZWRp
cmVjdHMKCSRzcWwgPSAnQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgJy5QRlguJ2FyY19y
ZWRpcmVjdCAnOwoJJHNxbCAuPSAnKGFyY19yZWRpcmVjdElEIElOVEVHRVIgQVVUT19JTkNS
RU1FTlQgUFJJTUFSWSBLRVksCgkJb3JpZ2luYWxVcmwgVkFSQ0hBUigyNTUpLAoJCXJlZGly
ZWN0VXJsIFZBUkNIQVIoMjU1KSk7JzsKCglpZiAoIXNhZmVfcXVlcnkoJHNxbCkpCgl7CgkJ
cmV0dXJuICdFcnJvciAtIHVuYWJsZSB0byBjcmVhdGUgYXJjX3JlZGlyZWN0IHRhYmxlJzsK
CX0KCglpZiAoIWluX2FycmF5KCdzdGF0dXNDb2RlJywgZ2V0VGhpbmdzKCdERVNDUklCRSAn
IC4gc2FmZV9wZngoJ2FyY19yZWRpcmVjdCcpKSkpCgl7CgkJc2FmZV9hbHRlcignYXJjX3Jl
ZGlyZWN0JywgJ0FERCBzdGF0dXNDb2RlIElOVCBOT1QgTlVMTCBERUZBVUxUIFwnMzAxXCcn
KTsKCX0KCglyZXR1cm47Cgp9CgovLyBVbmluc3RhbGwgZnVuY3Rpb24gLSBkZWxldGVzIE15
U1FMIHRhYmxlIGFuZCByZWxhdGVkIHByZWZlcmVuY2VzCgpmdW5jdGlvbiBhcmNfcmVkaXJl
Y3RfdW5pbnN0YWxsKCkKewoJJHNxbCA9ICJEUk9QIFRBQkxFIElGIEVYSVNUUyAiLlBGWC4i
YXJjX3JlZGlyZWN0OyI7CglpZiAoIXNhZmVfcXVlcnkoJHNxbCkpCgl7CgkJcmV0dXJuICdF
cnJvciAtIHVuYWJsZSB0byBkZWxldGUgYXJjX3JlZGlyZWN0IHRhYmxlJzsKCX0KfSI7czoz
OiJtZDUiO3M6MzI6ImUxNmRiMzEzZjgzMDIwODQ5NjU3YTJlMDU2ZTMzMzFmIjt9
